{{ $type := .Type }}
{{ $alert := .AlertType }}
{{ $caption := .Attributes.caption }}

{{/* ─── ALERT VARIANTS ─── */}}
{{ if eq $type "alert" }}

{{ if or (eq $alert "warning") (eq $alert "caution") }}

{{/* ── WARNING / CAUTION ── amber ── */}}
<figure class="my-8">
  <blockquote
    class="relative rounded-xl border border-amber-500/20 bg-amber-950/20 px-5 py-4 text-gray-300 transition-shadow duration-200 hover:shadow-[0_0_0_1px_rgba(251,191,36,0.15)]">

    <span class="absolute inset-y-3 left-0 w-0.5 rounded-full bg-amber-400/60"></span>
    <span class="absolute right-4 top-2.5 select-none font-mono text-[0.6rem] tracking-widest text-white/10">///</span>

    <div class="mb-3 flex items-center gap-2">
      <span
        class="inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-full bg-amber-400/15 font-mono text-[0.6rem] font-bold text-amber-400">!</span>
      <span class="font-mono text-[0.68rem] font-bold uppercase tracking-widest text-amber-400/90">
        {{ with .AlertTitle }}{{ . }}{{ else }}{{ or (i18n $alert) (title $alert) }}{{ end }}
      </span>
    </div>

    <div class="mb-3 h-px bg-gradient-to-r from-amber-400/15 to-transparent"></div>

    <div
      class="font-mono text-sm leading-relaxed [&_code]:rounded [&_code]:bg-white/5 [&_code]:px-1.5 [&_code]:py-0.5 [&_p]:mb-2 [&_p:last-child]:mb-0 [&_strong]:text-white">
      {{ .Text | safeHTML }}
    </div>
  </blockquote>
</figure>

{{ else if eq $alert "tip" }}

{{/* ── TIP ── emerald ── */}}
<figure class="my-8">
  <blockquote
    class="relative rounded-xl border border-emerald-500/20 bg-emerald-950/25 px-5 py-4 text-gray-300 transition-shadow duration-200 hover:shadow-[0_0_0_1px_rgba(52,211,153,0.15)]">

    <span class="absolute inset-y-3 left-0 w-0.5 rounded-full bg-emerald-400/60"></span>
    <span class="absolute right-4 top-2.5 select-none font-mono text-[0.6rem] tracking-widest text-white/10">///</span>

    <div class="mb-3 flex items-center gap-2">
      <span
        class="inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-full bg-emerald-400/15 font-mono text-[0.65rem] font-bold text-emerald-400">↑</span>
      <span class="font-mono text-[0.68rem] font-bold uppercase tracking-widest text-emerald-400/90">
        {{ with .AlertTitle }}{{ . }}{{ else }}{{ or (i18n $alert) (title $alert) }}{{ end }}
      </span>
    </div>

    <div class="mb-3 h-px bg-gradient-to-r from-emerald-400/15 to-transparent"></div>

    <div
      class="font-mono text-sm leading-relaxed [&_code]:rounded [&_code]:bg-white/5 [&_code]:px-1.5 [&_code]:py-0.5 [&_p]:mb-2 [&_p:last-child]:mb-0 [&_strong]:text-white">
      {{ .Text | safeHTML }}
    </div>
  </blockquote>
</figure>

{{ else }}

{{/* ── NOTE / IMPORTANT ── blue ── */}}
<figure class="my-8">
  <blockquote
    class="relative rounded-xl border border-blue-500/20 bg-blue-950/25 px-5 py-4 text-gray-300 transition-shadow duration-200 hover:shadow-[0_0_0_1px_rgba(96,165,250,0.15)]">

    <span class="absolute inset-y-3 left-0 w-0.5 rounded-full bg-blue-400/60"></span>
    <span class="absolute right-4 top-2.5 select-none font-mono text-[0.6rem] tracking-widest text-white/10">///</span>

    <div class="mb-3 flex items-center gap-2">
      <span
        class="inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-full bg-blue-400/15 font-mono text-[0.65rem] font-bold text-blue-400">i</span>
      <span class="font-mono text-[0.68rem] font-bold uppercase tracking-widest text-blue-400/90">
        {{ with .AlertTitle }}{{ . }}{{ else }}{{ or (i18n $alert) (title $alert) }}{{ end }}
      </span>
    </div>

    <div class="mb-3 h-px bg-gradient-to-r from-blue-400/15 to-transparent"></div>

    <div
      class="font-mono text-sm leading-relaxed [&_code]:rounded [&_code]:bg-white/5 [&_code]:px-1.5 [&_code]:py-0.5 [&_p]:mb-2 [&_p:last-child]:mb-0 [&_strong]:text-white">
      {{ .Text | safeHTML }}
    </div>
  </blockquote>
</figure>

{{ end }}

{{/* ─── CITE VARIANT ─── */}}
{{ else if $caption }}

<figure class="my-8">
  <blockquote
    class="relative rounded-xl border border-white/[0.07] bg-black/40 px-5 py-4 text-gray-300 transition-shadow duration-200 hover:shadow-[0_0_0_1px_rgba(167,139,250,0.12)]">

    <span class="absolute inset-y-3 left-0 w-0.5 rounded-full bg-violet-400/40"></span>
    <span class="absolute right-4 top-2.5 select-none font-mono text-[0.6rem] tracking-widest text-white/10">///</span>

    <div
      class="font-mono text-sm leading-relaxed [&_code]:rounded [&_code]:bg-white/5 [&_code]:px-1.5 [&_code]:py-0.5 [&_em]:text-violet-300/80 [&_p]:mb-2 [&_p:last-child]:mb-0 [&_strong]:text-white">
      {{ .Text | safeHTML }}
    </div>

    <div class="mt-3 border-t border-white/[0.06] pt-3">
      <figcaption class="font-mono text-[0.75rem] italic tracking-wide text-violet-400/70">
        {{ $caption | safeHTML }}
      </figcaption>
    </div>
  </blockquote>
</figure>

{{/* ─── REGULAR VARIANT ─── */}}
{{ else }}

<figure class="my-8">
  <blockquote
    class="relative rounded-xl border border-white/[0.07] bg-black/40 px-5 py-4 text-gray-300 transition-shadow duration-200 hover:shadow-[0_0_0_1px_rgba(96,165,250,0.08)]">

    <span class="absolute inset-y-3 left-0 w-0.5 rounded-full bg-blue-400/20"></span>
    <span class="absolute right-4 top-2.5 select-none font-mono text-[0.6rem] tracking-widest text-white/10">///</span>

    <div
      class="font-mono text-sm leading-relaxed [&_code]:rounded [&_code]:bg-white/5 [&_code]:px-1.5 [&_code]:py-0.5 [&_em]:text-gray-400 [&_p]:mb-2 [&_p:last-child]:mb-0 [&_strong]:text-white">
      {{ .Text | safeHTML }}
    </div>
  </blockquote>
</figure>

{{ end }}
