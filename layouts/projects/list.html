{{ define "main" }}
<main class="max-w-6xl mx-auto px-4 sm:px-6 pt-24 pb-12 text-gray-100">
  <header class="mb-8">
    <h1 class="text-2xl sm:text-3xl md:text-4xl tracking-wide text-white">{{ .Title }}</h1>
    <p class="mt-2 text-sm sm:text-base text-gray-400">
      {{ len .RegularPages }} items under this folder.
    </p>
  </header>

  {{- $pages := .RegularPages.ByDate.Reverse -}}

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
    {{- range $pages -}}
    {{- $href := .RelPermalink -}}
    {{- with .Params.website -}}{{- $href = . -}}
    {{- else -}}
    {{- with .Params.github -}}{{- $href = . -}}
    {{- else -}}
    {{- with .Params.link -}}{{- $href = . -}}{{- end -}}
    {{- end -}}
    {{- end -}}

    {{- $external := or (hasPrefix $href "http://") (hasPrefix $href "https://") -}}

    <a href="{{ $href }}"
      class="group block border border-gray-800/80 bg-[#070709] rounded-sm p-5 transition duration-200 hover:-translate-y-0.5 hover:bg-white/5 hover:border-indigo-400/30 hover:ring-1 hover:ring-indigo-400/20 motion-reduce:hover:translate-y-0"
      {{ if $external }}target="_blank" rel="noopener noreferrer" {{ end }}>
      <div class="flex items-start justify-between gap-3">
        <h2 class="text-lg sm:text-xl text-white tracking-wide leading-snug">
          <span class="relative inline-block">
            {{ .Title }}
            <span
              class="absolute left-0 -bottom-1 h-px w-0 bg-indigo-400 transition-all duration-300 group-hover:w-full"></span>
          </span>
        </h2>
        <span class="text-gray-500 group-hover:text-indigo-300 transition-colors" aria-hidden="true">â†—</span>
      </div>

      <p class="mt-3 text-sm sm:text-base text-gray-400 leading-relaxed">
        {{- with .Params.summary -}}
        {{- . -}}
        {{- else -}}
        {{- .Summary | plainify | truncate 140 -}}
        {{- end -}}
      </p>

      <div class="mt-4 flex flex-wrap gap-2">
        {{- with .Params.tags -}}
        {{- range . -}}
        <span class="px-2 py-0.5 text-xs sm:text-sm rounded-sm border border-gray-700/70 text-gray-300 bg-black/30">
          {{ . }}
        </span>
        {{- end -}}
        {{- end -}}
      </div>
    </a>
    {{- end -}}
  </div>
</main>
{{ end }}
